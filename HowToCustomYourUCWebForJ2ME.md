# 说明 #

方法可分为代理和暴破。

  * 代理：意思是搭建一个伪装的分配服务器网页，直接返回外国服务器，并忽略手机识别信息（如所用的平台，imei号码等），然后修改程序的里的地址为伪装的网页地址，以便总是获得国外服务器。此方法对6.7-7.2版和其它平台都适用。

  * 暴破：7.3版本后ucweb为了防止改服，采取了一些手段：虚假服务器地址，真实地址加密（运行时才计算出来），并更改认证协议，因此代理方法失效，要暴力破解，即直接修改程序关键语句（就是Java字节码），将外国服务器地址直接写入到程序中。获取服务器的行为依然存在（因为程序初始化要执行这个操作，搞掉它比较麻烦），但是ucweb.com返回的服务器会被忽略。注意手机识别信息仍然会发送到ucweb.com。

下载页中有已修改好的可用的版本。

代理版的伪装网页在Google的GAE平台，暴破版所用的外国服务器地址为75.126.123.208:8089，你可以使用Java Class Editor查找这个字符串来修改为其它服务器。
6.7-7.2推荐使用代理版，因为可忽略手机识别信息，如果你的手机运营商禁止访问GAE，可选择暴破版，7.3以后只能用暴破方法。

暴破方法过于复杂，需要阅读Java字节码，也没有自定义的必要，因此不提供教程。

# 代理方法 #

依照项目Wiki页，搭建UCWeb的代理，GAE的Java版或PHP版，方法基本上跟Opera Mini一样，改进过的服务端是直接返回服务器IP，并非中转，所以不挑IP，不检测语言标识，不转发隐私信息如手机的imei到ucweb官方（直接丢弃掉）。
  * 对PHP空间无特别要求，不需curl支持。
  * GAE的Java上传方法同operamini。

假设代理地址为
```
http://application-id.appspot.com/ucweb
```

然后就修改ucweb的jar文件，用压缩工具解压UCWeb的jar文件，这里还是用[Java Class File Editor](http://sourceforge.net/projects/classeditor/files/)，简称ce，是java程序，也可用其它类似工具，修改信息如下面表格

| **版本** | **测试文件** | **class文件** (注1) | **域名部分** | **地址部分** (注2) |
|:-------|:---------|:-----------------|:---------|:--------------|
| 6.7    | [UCWEB-6.7.0.32-999-71-09102211.jar](http://wap.ucweb.com/ucpack/filepack/999/71/UCWEB-6.7.0.32-999-71-09102211.jar) | q.class          | uc.ucweb.com:18075 | /?ucid        |
| 7.0    | [UCWEB-7.0.3.39-999-69-10011919.jar](http://wap.uc.cn/ucpack/filepack/999/69/UCWEB-7.0.3.39-999-69-10011919.jar) | am.class         | uc.ucweb.com:80 | /?dataver     |
| 7.1    | [UCWEB-7.1.0.42-999-69-10012818.jar](http://wap.ucweb.com/ucpack/filepack/999/69/UCWEB-7.1.0.42-999-69-10012818.jar) | al.class         | 同上       | 同上            |
| 7.2    | [UCWEB-7.2.0.46-999-69-10033015.jar](http://wap.ucweb.com/ucpack/filepack/999/69/UCWEB-7.2.0.46-999-69-10033015.jar) | n.class          | 同上       | 同上            |

**注1**: 因为UCWeb的代码混淆过，所以每个版本的要修改的class文件都不同，包含“m\_bid”字符串的class即是要修改的文件，Linux用户可以用grep命令来搜索，至于windows用户请自己找类似的工具。
```
grep m_bid ./*.class
```

**注2**: 地址部分应该查找“/”的，但查找“/”结果太多了，不容易定位，所以这里改用长一点的字符串。

  1. 运行ce，打开表格中的\*class文件**。
  1. 点击右上角的按钮，切换成“Modify Mode(on)”
  1. 切换到“Constant Pool”选项卡，右边区域里“Filter”选“Utf8“，点击“Apply”。
  1. 查找表格中的\*域名部分\*字符串，改成代理地址的域名，如“application-id.appspot.com”。
  1. 再把上方列表的滚动条拖到顶部，以便从头查找。
  1. 查找表格中的\*地址部分\*字符串，注意这里要改的是查找结果条目\*上面那个“/”条目**，把“/”改成“/ucweb”。
  1. 保存修改结果，把修改后的class，打包回jar（拉进原来的jar覆盖即可）。